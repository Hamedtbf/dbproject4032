<div class="container">
  <div class="nav">
    <button routerLink="/dashboard">بازگشت به داشبورد</button>
  </div>

  <h2>تاریخچه رزروها</h2>
  <p>در این بخش می‌توانید تمام رزروهای خود را مشاهده کنید.</p>

  <p *ngIf="message" class="message">{{ message }}</p>

  <div *ngIf="!reservations.length && !isLoading">
    <p>شما هیچ رزروی ثبت نکرده‌اید.</p>
  </div>

  <table *ngIf="reservations.length > 0">
    <thead>
      <tr>
        <th>شماره رزرو</th>
        <th>وضعیت</th>
        <th>زمان رزرو</th>
        <th>زمان انقضا</th>
        <th>عملیات</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let res of reservations">
        <td>{{ res.id }}</td>
        <td>{{ res.status }}</td>
        <td>{{ res.reserve_time | jalali }}</td>
        <td>{{ res.expire_time | jalali }}</td>
        <td>
          <button *ngIf="res.status === 'reserved'" (click)="startPayment(res.id)">پرداخت نهایی</button>
          <span *ngIf="res.status !== 'reserved'">--</span>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="modal-backdrop" *ngIf="payingReservationId">
    <div class="modal">
      <h3>انتخاب روش پرداخت</h3>
      <p>لطفا روش پرداخت برای رزرو شماره {{ payingReservationId }} را انتخاب کنید.</p>
      <div class="form-group">
        <label for="paymentMethod">روش پرداخت</label>
        <select id="paymentMethod" [(ngModel)]="selectedMethod">
          <option value="کیف پول">کیف پول</option>
          <option value="درگاه پرداخت">درگاه پرداخت</option>
        </select>
      </div>
      <button (click)="confirmPayment()">تایید و پرداخت</button>
      <button (click)="payingReservationId = null" class="secondary" style="margin-right: 10px;">انصراف</button>
    </div>
  </div>
</div>
